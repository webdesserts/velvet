set nocompatible
set shell=/bin/sh

let g:velvet = {}

if has('win32') || has('win16')
  let g:velvet.vimfiles = "vimfiles"
  let g:velvet.vimrc = "_vimrc"
else
  let g:velvet.vimfiles = ".vim"
  let g:velvet.vimrc = ".vimrc"
end

" Find shit
let g:velvet.config = "~/". g:velvet.vimfiles ."/local/config.vim"
let g:velvet.plugins = "~/". g:velvet.vimfiles ."/local/plugins.vim"
let g:velvet.settings = split(glob('~/'.g:velvet.vimfiles.'/local/settings/*.vim'),'\n')

" Source that shit
exe 'source' g:velvet.config
exe 'source' g:velvet.plugins

for file in g:velvet.settings
    exe 'source' file
endfor

cd %:p:h
